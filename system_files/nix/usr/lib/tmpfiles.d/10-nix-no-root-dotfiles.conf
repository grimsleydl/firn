# Prevent nix-installers' USER tmpfiles from creating Nix dotfiles in root's home
# while keeping the same behavior for all non-root users.
#
# systemd-tmpfiles --user reads:
#   ~/.config/user-tmpfiles.d (user-controlled)
#   ...and /usr/share/user-tmpfiles.d (vendor/admin)
# So we shadow nix-daemon.conf for root only with an empty file.

d /root/.config/user-tmpfiles.d 0700 root root - -
f /root/.config/user-tmpfiles.d/nix-daemon.conf 0600 root root -

# optional: keep Nix internal root dirs, but DO NOT create dotfiles in /root
# d /nix/var/nix/profiles/per-user/%u 0755
# d /nix/var/nix/gcroots/per-user/%u  0755
